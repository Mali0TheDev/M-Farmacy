<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="assets/images/Favorite_Icon.png">
    
    <link rel="stylesheet" href="about_us.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <title>M-Farmacy | من نحن</title>
</head>
<body>

    <header class="main-header">
        <div class="container">
            <nav class="nav-left">
                <a href="index.html" class="nav-link">الرئيسية</a> 
                <a href="about_us.html" class="nav-link active">من نحن</a>
                <a href="blog.html" class="nav-link">المدونة</a>
                <a href="products.html" class="nav-link">المنتجات</a>
                <a href="contact.html" class="nav-link">اتصل بنا</a>
            </nav>

            <div class="nav-middle">
                <a href="index.html">
                    <img src="assets/images/Logo.png" alt="Logo" class="header-logo">
                </a>
            </div>

            <div class="nav-right">
                <div class="search-bar">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="text" placeholder="بحث ...">
                </div>
                
                <div class="icon-group desktop-only">
                    <a href="#" class="login-link">
                        <i class="fa-regular fa-user"></i>
                        <span>تسجيل الدخول</span>
                    </a>
                    <a href="#" class="icon-link">
                        <i class="fa-solid fa-gift"></i>
                    </a>
                    <a href="#" class="cart-icon">
                        <i class="fa-solid fa-bag-shopping"></i>
                    </a>
                </div>
            </div>

            <div class="menu-toggle" id="mobile-menu-btn">
                <i class="fa-solid fa-bars"></i>
            </div>
        </div>
    </header>

    <aside class="mobile-sidebar" id="sidebar">
        <div class="close-menu" id="close-btn">&times;</div>
        
        <div class="sidebar-section">
            <h4>الصفحات</h4>
            <a href="index.html">الرئيسية</a>
            <a href="about_us.html" class="active">من نحن</a>
            <a href="blog.html">المدونة</a>
            <a href="products.html">المنتجات</a>
            <a href="contact.html">اتصل بنا</a>
        </div>
        
        <hr>

        <div class="sidebar-section">
            <h4>الحساب والأدوات</h4>
            <a href="#"><i class="fa-regular fa-user"></i> تسجيل الدخول</a>
            <a href="#"><i class="fa-solid fa-gift"></i> الهدايا</a>
            <a href="#" class="mobile-cart-trigger"><i class="fa-solid fa-bag-shopping"></i> عربة التسوق</a>
        </div>
    </aside>

    <main>
        <section class="about-hero">
            <div class="about-container">
                <h1 class="section-title">قصتنا</h1>
                <p class="about-lead">ولدت "إم-فارمسي" من الرغبة في جسر الفجوة بين الصيدلة التقليدية والعلاج الطبيعي، وتقديم رعاية صحية مدعومة علمياً لمجتمعنا.</p>
            </div>
        </section>

        <section class="pillars-section">
            <div class="about-container">
                <h2 class="sub-heading" style="color: #246d44;">ركائزنا الثلاث</h2>
                <div class="pillars-grid">
                    <div class="pillar-card">
                        <div class="pillar-icon"><i class="fa-solid fa-leaf"></i></div>
                        <h3>مكونات نقية</h3>
                        <p>نستخدم فقط المواد العضوية 100%، غير السامة، والمستمدة من مصادر مستدامة.</p>
                    </div>
                    <div class="pillar-card">
                        <div class="pillar-icon"><i class="fas fa-flask"></i></div>
                        <h3>إشراف الخبراء</h3>
                        <p>يتم التحقق من كل منتج بدقة من قبل متخصصين في الصحة وخبراء الأعشاب.</p>
                    </div>
                    <div class="pillar-card">
                        <div class="pillar-icon"><i class="fa-solid fa-heart-pulse"></i></div>
                        <h3>المجتمع أولاً</h3>
                        <p>ملتزمون بالتثقيف الصحي ومبادرات الرفاهية المحلية في منطقة فشلوم.</p>
                    </div>
                </div>
            </div>
        </section>

        <div class="cart-overlay" id="cart-overlay"></div>

        <aside class="cart-sidebar" id="cart-sidebar">
            <div class="cart-header">
                <h3>عربة التسوق</h3>
                <span class="close-cart" id="close-cart">&times;</span>
            </div>
            <div class="cart-body" id="cart-items-container">
                </div>
            <div class="cart-footer">
                <div class="cart-total-row">
                    <span>المجموع الكلي:</span>
                    <span id="cart-total-amount">0.00 د.ل</span>
                </div>
                <button class="checkout-btn">إتمام الشراء</button>
            </div>
        </aside>

        <div id="cart-toast" class="cart-toast">تم إضافة المنتج إلى السلة بنجاح!</div>
    </main>

    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-logo">
                <img src="assets/images/Logo.png" alt="M-Farmacy Logo">
            </div>
            <div class="footer-socials">
                <a href="#"><i class="fa-brands fa-facebook-f"></i></a>
                <a href="#"><i class="fa-brands fa-instagram"></i></a>
                <a href="#"><i class="fa-brands fa-tiktok"></i></a>
            </div>
            <div class="footer-copyright">
                <p>&copy; 2025 إم-فارمسي. بواسطة: مالك مملوك, سفيان الخطابي. جميع الحقوق محفوظة.</p>
            </div>
        </div>
    </footer>

    <script>
        // --- 1. تعريف المتغيرات والعناصر ---
        const menuBtn = document.getElementById('mobile-menu-btn');
        const closeBtn = document.getElementById('close-btn');
        const sidebar = document.getElementById('sidebar');
        const cartSidebar = document.getElementById('cart-sidebar');
        const cartOverlay = document.getElementById('cart-overlay');
        const closeCart = document.getElementById('close-cart');
        const cartIcon = document.querySelector('.cart-icon');
        const mobileCartTrigger = document.querySelector('.mobile-cart-trigger');
        const cartToast = document.getElementById('cart-toast');

        // --- 2. تهيئة بيانات العربة ---
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        updateCartUI();

        // --- 3. الوظائف البرمجية الأساسية ---

        // فتح وإغلاق العربة الجانبية
        function toggleCart() {
            cartSidebar.classList.toggle('active');
            cartOverlay.classList.toggle('active');
            document.body.style.overflow = cartSidebar.classList.contains('active') ? 'hidden' : 'auto';
        }

        // تحديث واجهة العربة وتخزين البيانات
        function updateCartUI() {
            const container = document.getElementById('cart-items-container');
            const totalDisplay = document.getElementById('cart-total-amount');
            
            if (!container || !totalDisplay) return;

            container.innerHTML = '';
            let total = 0;

            cart.forEach((item, index) => {
                total += item.price * item.quantity;
                container.innerHTML += `
                    <div class="cart-item">
                        <img src="${item.image}" alt="${item.name}">
                        <div class="item-details">
                            <h4>${item.name}</h4>
                            <p class="item-price">${item.price.toFixed(2)} د.ل</p>
                            <div class="quantity-controls">
                                <button onclick="changeQty(${index}, -1)" class="qty-btn">-</button>
                                <input type="number" value="${item.quantity}" readonly>
                                <button onclick="changeQty(${index}, 1)" class="qty-btn">+</button>
                            </div>
                        </div>
                        <button onclick="removeFromCart(${index})" class="remove-item">
                            <i class="fa-solid fa-trash"></i>
                        </button>
                    </div>`;
            });

            totalDisplay.innerText = total.toFixed(2) + " د.ل";
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        // تغيير كمية المنتج في العربة
        window.changeQty = function(index, delta) {
            if (cart[index].quantity + delta > 0) {
                cart[index].quantity += delta;
                updateCartUI();
            }
        };

        // إزالة منتج نهائياً من العربة
        window.removeFromCart = function(index) {
            cart.splice(index, 1);
            updateCartUI();
        };

        // --- 4. مستمعات الأحداث (EventListeners) ---

        // القائمة الجانبية للهواتف
        menuBtn.addEventListener('click', () => sidebar.classList.add('active'));
        closeBtn.addEventListener('click', () => sidebar.classList.remove('active'));

        // التفاعل مع أيقونات العربة
        if(cartIcon) cartIcon.addEventListener('click', (e) => { e.preventDefault(); toggleCart(); });
        if(closeCart) closeCart.onclick = toggleCart;
        if(cartOverlay) cartOverlay.onclick = toggleCart;

        // فتح العربة من القائمة الجانبية للهاتف
        if (mobileCartTrigger) {
            mobileCartTrigger.addEventListener('click', (e) => {
                e.preventDefault();
                sidebar.classList.remove('active');
                toggleCart();
            });
        }

        // وظيفة زر إتمام الشراء
        const checkoutBtn = document.querySelector('.checkout-btn');
        if(checkoutBtn) {
            checkoutBtn.addEventListener('click', () => {
                if (cart.length === 0) {
                    alert("سلة التسوق فارغة!");
                    return;
                }
                window.location.href = 'checkout.html';
            });
        }
    </script>

</body>
</html>